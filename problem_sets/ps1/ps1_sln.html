<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Peter Ganong, Maggie Shi, and Ozzy Houck">
<meta name="dcterms.date" content="2024-09-30">

<title>30538 Problem Sets 1: Parking Tickets Solutions</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="ps1_sln_files/libs/clipboard/clipboard.min.js"></script>
<script src="ps1_sln_files/libs/quarto-html/quarto.js"></script>
<script src="ps1_sln_files/libs/quarto-html/popper.min.js"></script>
<script src="ps1_sln_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="ps1_sln_files/libs/quarto-html/anchor.min.js"></script>
<link href="ps1_sln_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="ps1_sln_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="ps1_sln_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="ps1_sln_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="ps1_sln_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">30538 Problem Sets 1: Parking Tickets Solutions</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Peter Ganong, Maggie Shi, and Ozzy Houck </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 30, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<ol type="1">
<li><strong>PS1:</strong> Due Sat Oct 5 at 5:00PM Central. Worth 50 points.</li>
</ol>
<p>We use (<code>*</code>) to indicate a problem that we think might be time consuming.</p>
<p>Steps to submit (5 points on PS1 and 10 points on PS2)</p>
<ol type="1">
<li>“This submission is my work alone and complies with the 30538 integrity policy.” Add your initials to indicate your agreement: **__**</li>
<li>“I have uploaded the names of anyone I worked with on the problem set <strong><a href="https://docs.google.com/forms/d/1-zzHx762odGlpVWtgdIC55vqF-j3gqdAp6Pno1rIGK0/edit">here</a></strong>” **__** (1 point)</li>
<li>Late coins used this pset: **__** Late coins left after submission: **__**</li>
<li>Knit your <code>ps1.qmd</code> to make <code>ps1.pdf</code>.
<ul>
<li>The PDF should not be more than 25 pages. Use <code>head()</code> and re-size figures when appropriate.</li>
</ul></li>
<li>Push <code>ps1.qmd</code> and <code>ps1.pdf</code> to your github repo. It is fine to use Github Desktop.</li>
<li>Submit <code>ps1.pdf</code> via Gradescope (4 points)</li>
<li>Tag your submission in Gradescope</li>
</ol>
<section id="background" class="level1">
<h1>Background</h1>
<p>Read <strong><a href="https://features.propublica.org/driven-into-debt/chicago-ticket-debt-bankruptcy/">this</a></strong> article and <strong><a href="https://www.propublica.org/article/chicago-vehicle-sticker-law-ticket-price-hike-black-drivers-debt">this</a></strong> shorter article. If you are curious to learn more, <strong><a href="https://www.propublica.org/series/driven-into-debt">this</a></strong> page has all of the articles that ProPublica has done on this topic.</p>
</section>
<section id="ps1" class="level1">
<h1>PS1</h1>
<section id="read-in-one-percent-sample-15-points" class="level2">
<h2 class="anchored" data-anchor-id="read-in-one-percent-sample-15-points">Read in one percent sample (15 Points)</h2>
<ol type="1">
<li><p>To help you get started, we pushed a file to the course repo called <code>parking_tickets_one_percent.csv</code> which gives you a one percent sample of tickets. We constructed the sample by selecting ticket numbers that end in <code>01</code>. How long does it take to read in this file? (Find a function to measure how long it takes the command to run. Note that everytime you run, there will be some difference in how long the code takes to run). Add an <code>assert</code> statement which verifies that there are 287458 rows.</p>
<div id="fa917555" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> time</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> warnings</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>warnings.filterwarnings(<span class="st">'ignore'</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> read_parking_tickets(file_path):</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    start_time <span class="op">=</span> time.time()</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> pd.read_csv(file_path)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    end_time <span class="op">=</span> time.time()</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    elapsed_time <span class="op">=</span> end_time <span class="op">-</span> start_time</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">assert</span> <span class="bu">len</span>(df) <span class="op">==</span> <span class="dv">287458</span>, <span class="st">"The number of rows is not as expected."</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Time taken to read the file: </span><span class="sc">{</span>elapsed_time<span class="sc">:.2f}</span><span class="ss"> seconds"</span>)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> df</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Example usage</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>file_path <span class="op">=</span> <span class="st">'data/parking_tickets_one_percent.csv'</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> read_parking_tickets(file_path)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Time taken to read the file: 0.64 seconds</code></pre>
</div>
</div></li>
<li><p>Using a function in the <code>os</code> library calculate how many megabytes is the CSV file? Using math, how large would you predict the full data set is?</p></li>
</ol>
<div id="08b43b9c" class="cell" data-message="false" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>    <span class="im">import</span> os</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> get_file_size(file_path):</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>        file_size <span class="op">=</span> os.path.getsize(file_path) <span class="op">/</span> (<span class="dv">1024</span> <span class="op">*</span> <span class="dv">1024</span>)  <span class="co"># Convert bytes to megabytes</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> file_size</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> get_file_size_mb(file_path):</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>        file_size_bytes <span class="op">=</span> os.path.getsize(file_path)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Example usage</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    file_size <span class="op">=</span> get_file_size(file_path)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"File size: </span><span class="sc">{</span>file_size<span class="sc">:.2f}</span><span class="ss"> MB"</span>)</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Predict the full dataset size</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    one_percent_size <span class="op">=</span> file_size</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>    full_dataset_size <span class="op">=</span> one_percent_size <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Predicted full dataset size: </span><span class="sc">{</span>full_dataset_size<span class="sc">:.2f}</span><span class="ss"> MB"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>File size: 79.78 MB
Predicted full dataset size: 7978.00 MB</code></pre>
</div>
</div>
<ol start="3" type="1">
<li>The rows on the dataset are ordered or sorted by a certain column by default. Which column? Then, subset the dataset to the first 500 rows and write a function that tests if the column is ordered.</li>
</ol>
<div id="39b0c6ed" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># visually inspect the data and see that issue_date is ordered </span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df.head())</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> is_increasing(data, column):</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    data[column] <span class="op">=</span> pd.to_datetime(data[column]) </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    is_increasing <span class="op">=</span> data[column].is_monotonic_increasing</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> is_increasing</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="co"># make sure issue_date is a datetime</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'issue_date'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'issue_date'</span>])</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>increasing_check <span class="op">=</span> is_increasing(df.head(<span class="dv">500</span>), <span class="st">"issue_date"</span>)</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(increasing_check)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Unnamed: 0  ticket_number           issue_date violation_location  \
0           1     51482901.0  2007-01-01 01:25:00    5762 N AVONDALE   
1           2     50681501.0  2007-01-01 01:51:00    2724 W FARRAGUT   
2           3     51579701.0  2007-01-01 02:22:00       1748 W ESTES   
3           4     51262201.0  2007-01-01 02:35:00    4756 N SHERIDAN   
4           5     51898001.0  2007-01-01 03:50:00    7134 S CAMPBELL   

                                license_plate_number license_plate_state  \
0  d41ee9a4cb0676e641399ad14aaa20d06f2c6896de6366...                  IL   
1  3395fd3f71f18f9ea4f0a8e1f13bf0aa15052fc8e5605a...                  IL   
2  302cb9c55f63ff828d7315c5589d97f1f8144904d66eb3...                  IL   
3  94d018f52c7990cea326d1810a3278e2c6b1e8b44f3c52...                  IL   
4  876dd3a95179f4f1d720613f6e32a5a7b86b0e6f988bf4...                  IL   

  license_plate_type      zipcode violation_code  \
0                PAS  606184118.0       0964090E   
1                PAS  606454911.0       0964090E   
2                PAS  604116803.0       0964150B   
3                PAS  606601345.0       0976160F   
4                PAS  606291432.0       0964100A   

                      violation_description  ...  fine_level2_amount  \
0                RESIDENTIAL PERMIT PARKING  ...                 100   
1                RESIDENTIAL PERMIT PARKING  ...                 100   
2       PARKING/STANDING PROHIBITED ANYTIME  ...                 100   
3  EXPIRED PLATES OR TEMPORARY REGISTRATION  ...                 100   
4                WITHIN 15' OF FIRE HYDRANT  ...                 200   

  current_amount_due total_payments  ticket_queue  ticket_queue_date  \
0                0.0           50.0          Paid         2007-03-20   
1                0.0           50.0          Paid         2007-01-31   
2              122.0            0.0        Notice         2007-02-28   
3                0.0           50.0          Paid         2007-01-11   
4                0.0          100.0          Paid         2007-04-25   

   notice_level  hearing_disposition notice_number officer  \
0          DETR               Liable  5.080059e+09   17266   
1          VIOL                  NaN  5.079876e+09   10799   
2          SEIZ                  NaN  5.037862e+09   17253   
3           NaN                  NaN  5.075310e+09    3307   
4          DETR                  NaN  5.073568e+09   16820   

                        address  
0  5700 n avondale, chicago, il  
1  2700 w farragut, chicago, il  
2     1700 w estes, chicago, il  
3  4700 n sheridan, chicago, il  
4  7100 s campbell, chicago, il  

[5 rows x 24 columns]
True</code></pre>
</div>
</div>
</section>
<section id="cleaning-the-data-and-benchmarking-15-points" class="level2">
<h2 class="anchored" data-anchor-id="cleaning-the-data-and-benchmarking-15-points">Cleaning the data and benchmarking (15 Points)</h2>
<ol type="1">
<li>How many tickets were issued in the data in 2017? How many tickets does that imply were issued in the full data in 2017? How many tickets are issued each year according to the ProPublica article? Do you think that there is a meaningful difference?</li>
</ol>
<div id="ea54c1d4" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>df_2017 <span class="op">=</span> df[df[<span class="st">'issue_date'</span>].dt.year <span class="op">==</span> <span class="dv">2017</span>]</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df_2017.shape)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(22364, 24)</code></pre>
</div>
</div>
<p><strong>Solution:</strong> There are 22k tickets in 2017 which implies that 2.2 million tickets were issued in 2017. The article mentions 3 million tickets which is a significant difference.</p>
<ol start="2" type="1">
<li>Pooling the data across all years what are the top 20 most frequent violation types? Make a bar graph to show the frequency of these ticket types. Format the graph such that the violation descriptions are legible and no words are cut off.</li>
</ol>
<div id="eecf6216" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> altair <span class="im">as</span> alt</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Count the frequencies of violation types in 1000s</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>violation_counts <span class="op">=</span> df[<span class="st">'violation_description'</span>].value_counts().reset_index()</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>violation_counts.columns <span class="op">=</span> [<span class="st">'Violation Description'</span>, <span class="st">'Frequency'</span>]</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>violation_counts[<span class="st">'Frequency (1000s)'</span>] <span class="op">=</span> violation_counts[<span class="st">'Frequency'</span>] <span class="op">/</span> <span class="dv">1000</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co"># make violation description title case</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>violation_counts[<span class="st">'Violation Description'</span>] <span class="op">=</span> violation_counts[<span class="st">'Violation Description'</span>].<span class="bu">str</span>.title()</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the top 20 violation types</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>top_20_violations <span class="op">=</span> violation_counts.nlargest(<span class="dv">20</span>, <span class="st">'Frequency (1000s)'</span>)</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the frequencies</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>alt.Chart(top_20_violations).mark_bar().encode(</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">'Frequency (1000s):Q'</span>, <span class="co"># Q means quantitative</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span>alt.Y(<span class="st">'Violation Description:N'</span>, sort<span class="op">=</span><span class="st">'-x'</span>)</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>).properties(</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="st">'Top 20 Most Frequent Violations'</span>,</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>    width<span class="op">=</span><span class="dv">500</span>,</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>    height<span class="op">=</span><span class="dv">300</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>).configure_axis( <span class="co"># Configure the axis so that the labels are not cut off</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>    labelFontSize<span class="op">=</span><span class="dv">8</span>,</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>    labelLimit<span class="op">=</span><span class="dv">400</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">

<style>
  #altair-viz-c799adeae2634d48a9f6fb07642e8480.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-c799adeae2634d48a9f6fb07642e8480.vega-embed details,
  #altair-viz-c799adeae2634d48a9f6fb07642e8480.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-c799adeae2634d48a9f6fb07642e8480"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-c799adeae2634d48a9f6fb07642e8480") {
      outputDiv = document.getElementById("altair-viz-c799adeae2634d48a9f6fb07642e8480");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}, "axis": {"labelFontSize": 8, "labelLimit": 400}}, "data": {"name": "data-90255cf0e0d455a38687e3bcaa6463de"}, "mark": {"type": "bar"}, "encoding": {"x": {"field": "Frequency (1000s)", "type": "quantitative"}, "y": {"field": "Violation Description", "sort": "-x", "type": "nominal"}}, "height": 300, "title": "Top 20 Most Frequent Violations", "width": 500, "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-90255cf0e0d455a38687e3bcaa6463de": [{"Violation Description": "Expired Plates Or Temporary Registration", "Frequency": 44811, "Frequency (1000s)": 44.811}, {"Violation Description": "Street Cleaning", "Frequency": 28712, "Frequency (1000s)": 28.712}, {"Violation Description": "Residential Permit Parking", "Frequency": 23683, "Frequency (1000s)": 23.683}, {"Violation Description": "Exp. Meter Non-Central Business District", "Frequency": 20600, "Frequency (1000s)": 20.6}, {"Violation Description": "Parking/Standing Prohibited Anytime", "Frequency": 19753, "Frequency (1000s)": 19.753}, {"Violation Description": "Expired Meter Or Overstay", "Frequency": 18756, "Frequency (1000s)": 18.756}, {"Violation Description": "Rear And Front Plate Required", "Frequency": 15829, "Frequency (1000s)": 15.829}, {"Violation Description": "No City Sticker Vehicle Under/Equal To 16,000 Lbs.", "Frequency": 14246, "Frequency (1000s)": 14.246}, {"Violation Description": "Rush Hour Parking", "Frequency": 11965, "Frequency (1000s)": 11.965}, {"Violation Description": "No City Sticker Or Improper Display", "Frequency": 10773, "Frequency (1000s)": 10.773}, {"Violation Description": "Expired Meter Central Business District", "Frequency": 9736, "Frequency (1000s)": 9.736}, {"Violation Description": "No Standing/Parking Time Restricted", "Frequency": 8640, "Frequency (1000s)": 8.64}, {"Violation Description": "Within 15' Of Fire Hydrant", "Frequency": 6104, "Frequency (1000s)": 6.104}, {"Violation Description": "Park Or Stand In Bus/Taxi/Carriage Stand", "Frequency": 6004, "Frequency (1000s)": 6.004}, {"Violation Description": "Truck,Rv,Bus, Or Taxi Residential Street", "Frequency": 4789, "Frequency (1000s)": 4.789}, {"Violation Description": "Street Cleaning Or Special Event", "Frequency": 3370, "Frequency (1000s)": 3.37}, {"Violation Description": "Double Parking Or Standing", "Frequency": 2904, "Frequency (1000s)": 2.904}, {"Violation Description": "Expired Plate Or Temporary Registration", "Frequency": 2720, "Frequency (1000s)": 2.72}, {"Violation Description": "Stop Sign Or Traffic Signal", "Frequency": 2191, "Frequency (1000s)": 2.191}, {"Violation Description": "Park Or Block Alley", "Frequency": 2050, "Frequency (1000s)": 2.05}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
</section>
<section id="visual-encoding-15-points" class="level2">
<h2 class="anchored" data-anchor-id="visual-encoding-15-points">Visual Encoding (15 Points)</h2>
<ol type="1">
<li>In lecture 2, we discussed how Altair thinks about categorizing data series into four different types. Which data type or types would you associate with each column in the data frame? Your response should take the form of a markdown table where each row corresponds to one of the variables in the parking tickets dataset, the first column is the variable name and the second column is the variable type or types. If you argue that a column might be associated with than one type, explain why in writing below the table.</li>
</ol>
<p><strong>Solution:</strong></p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Variable Name</th>
<th>Altair Data Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ticket_number</td>
<td>Nominal Ordinal</td>
</tr>
<tr class="even">
<td>issue_date</td>
<td>Temporal</td>
</tr>
<tr class="odd">
<td>violation_location</td>
<td>Nominal</td>
</tr>
<tr class="even">
<td>license_plate_number</td>
<td>Nominal</td>
</tr>
<tr class="odd">
<td>license_plate_state</td>
<td>Nominal</td>
</tr>
<tr class="even">
<td>license_plate_type</td>
<td>Nominal</td>
</tr>
<tr class="odd">
<td>zipcode</td>
<td>Nominal or Quantitative</td>
</tr>
<tr class="even">
<td>violation_code</td>
<td>Nominal</td>
</tr>
<tr class="odd">
<td>violation_description</td>
<td>Nominal</td>
</tr>
<tr class="even">
<td>unit</td>
<td>Quantitative</td>
</tr>
<tr class="odd">
<td>unit_description</td>
<td>Nominal</td>
</tr>
<tr class="even">
<td>vehicle_make</td>
<td>Nominal</td>
</tr>
<tr class="odd">
<td>fine_level1_amount</td>
<td>Quantitative</td>
</tr>
<tr class="even">
<td>fine_level2_amount</td>
<td>Quantitative</td>
</tr>
<tr class="odd">
<td>current_amount_due</td>
<td>Quantitative</td>
</tr>
<tr class="even">
<td>total_payments</td>
<td>Quantitative</td>
</tr>
<tr class="odd">
<td>ticket_queue</td>
<td>Nominal</td>
</tr>
<tr class="even">
<td>ticket_queue_date</td>
<td>Temporal</td>
</tr>
<tr class="odd">
<td>notice_level</td>
<td>Ordinal</td>
</tr>
<tr class="even">
<td>hearing_disposition</td>
<td>Nominal</td>
</tr>
<tr class="odd">
<td>notice_number</td>
<td>Nominal or Ordinal</td>
</tr>
<tr class="even">
<td>officer</td>
<td>Nominal</td>
</tr>
<tr class="odd">
<td>address</td>
<td>Nominal</td>
</tr>
<tr class="even">
<td>date</td>
<td>Temporal</td>
</tr>
</tbody>
</table>
<p>While written as a number, ticket_number seems to be used for identification and so it will most likely be useful as a nominal data type. However, if the ticket_number can be used to tell us which order tickets were written it could be ordinal. The same argument holds for notice_number.</p>
<p>zipcodes are most often used as nominal data types, but they can also be used as quantitative data types if you are using the geographic information that is encoded in the zipcode numbering.</p>
<ol start="2" type="1">
<li>Compute the fraction of time that tickets issued to each vehicle make are marked as paid. Show the results as a bar graph. Why do you think that some vehicle makes are more or less likely to have paid tickets?</li>
</ol>
<div id="fe9efe19" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute the frequency of tickets for each vehicle make</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>ticket_freq <span class="op">=</span> df[<span class="st">'vehicle_make'</span>].value_counts()</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute the fraction of time that tickets issued to each vehicle make are marked as paid</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>paid_tickets <span class="op">=</span> df[df[<span class="st">'ticket_queue'</span>] <span class="op">==</span> <span class="st">'Paid'</span>].groupby(<span class="st">'vehicle_make'</span>).size()</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>paid_fraction <span class="op">=</span> paid_tickets <span class="op">/</span> ticket_freq</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort by fraction paid</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>paid_fraction <span class="op">=</span> paid_fraction.sort_values(ascending<span class="op">=</span><span class="va">False</span>).reset_index()</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(paid_fraction.head())</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>paid_fraction.columns <span class="op">=</span> [<span class="st">'vehicle_make'</span>, <span class="st">'fraction_paid'</span>]  <span class="co"># Rename the columns for the plot</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the top 20 vehicle makes by fraction of tickets paid</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>alt.Chart(paid_fraction.head(<span class="dv">20</span>)).mark_bar().encode(</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">'vehicle_make:N'</span>, title <span class="op">=</span> <span class="st">"Vehicle Make"</span>, sort <span class="op">=</span> <span class="st">'-y'</span>),  <span class="co"># N: nominal data type</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">'fraction_paid:Q'</span>, title <span class="op">=</span> <span class="st">"Fraction Paid"</span>)  <span class="co"># Q: quantitative data type</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>).properties(</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="st">'Fraction of Tickets Paid by Vehicle Make'</span>,</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>    width<span class="op">=</span><span class="dv">500</span>,</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>    height<span class="op">=</span><span class="dv">300</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  vehicle_make    0
0         ZNEN  1.0
1         DERB  1.0
2         WILS  1.0
3         WHIT  1.0
4         ASTO  1.0</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="6">

<style>
  #altair-viz-f953e5cde3d24fc0bb4fc02c12ebba09.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-f953e5cde3d24fc0bb4fc02c12ebba09.vega-embed details,
  #altair-viz-f953e5cde3d24fc0bb4fc02c12ebba09.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-f953e5cde3d24fc0bb4fc02c12ebba09"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-f953e5cde3d24fc0bb4fc02c12ebba09") {
      outputDiv = document.getElementById("altair-viz-f953e5cde3d24fc0bb4fc02c12ebba09");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-25140e66c2be4e9c75cd83632e5af7fe"}, "mark": {"type": "bar"}, "encoding": {"x": {"field": "vehicle_make", "sort": "-y", "title": "Vehicle Make", "type": "nominal"}, "y": {"field": "fraction_paid", "title": "Fraction Paid", "type": "quantitative"}}, "height": 300, "title": "Fraction of Tickets Paid by Vehicle Make", "width": 500, "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-25140e66c2be4e9c75cd83632e5af7fe": [{"vehicle_make": "ZNEN", "fraction_paid": 1.0}, {"vehicle_make": "DERB", "fraction_paid": 1.0}, {"vehicle_make": "WILS", "fraction_paid": 1.0}, {"vehicle_make": "WHIT", "fraction_paid": 1.0}, {"vehicle_make": "ASTO", "fraction_paid": 1.0}, {"vehicle_make": "TOMO", "fraction_paid": 1.0}, {"vehicle_make": "SYMP", "fraction_paid": 1.0}, {"vehicle_make": "SANY", "fraction_paid": 1.0}, {"vehicle_make": "PREO", "fraction_paid": 1.0}, {"vehicle_make": "PEIR", "fraction_paid": 1.0}, {"vehicle_make": "BRDL", "fraction_paid": 1.0}, {"vehicle_make": "MG", "fraction_paid": 1.0}, {"vehicle_make": "MINI", "fraction_paid": 0.8203883495145631}, {"vehicle_make": "MASE", "fraction_paid": 0.8133333333333334}, {"vehicle_make": "SMRT", "fraction_paid": 0.8085106382978723}, {"vehicle_make": "LOTU", "fraction_paid": 0.8}, {"vehicle_make": "SCIO", "fraction_paid": 0.7829747427502338}, {"vehicle_make": "PORS", "fraction_paid": 0.782258064516129}, {"vehicle_make": "SUBA", "fraction_paid": 0.778778386844166}, {"vehicle_make": "PIAG", "fraction_paid": 0.7777777777777778}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
<p><strong>Solution:</strong> Vehicle makes with the highest fraction paid also look like they are more expensive brands. Car brand is likely a proxy for income and wealth which would affect the ability to pay tickets.</p>
<ol start="3" type="1">
<li>Make a plot for the number of tickets issued over time by adapting the <a href="https://altair-viz.github.io/gallery/filled_step_chart.html">Filled Step Chart</a> example online. Go back to Bertin’s taxonomy of visual encoding, which we discussed in lecture. What visual encoding channel or channels does this use?</li>
</ol>
<div id="f86317fc" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># make sure issue_date is a datetime</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'issue_date'</span>] <span class="op">=</span> pd.to_datetime(df[<span class="st">'issue_date'</span>])</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># aggregate to the month level</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'date'</span>] <span class="op">=</span> df[<span class="st">'issue_date'</span>].dt.strftime(<span class="st">'%Y-%m'</span>)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>tickets_by_date <span class="op">=</span> df.groupby(<span class="st">'date'</span>).size().reset_index()</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>tickets_by_date.columns <span class="op">=</span> [<span class="st">'Date'</span>, <span class="st">'Number of Tickets per Month'</span>]</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>alt.Chart(tickets_by_date).mark_area(</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">"lightblue"</span>,</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    interpolate<span class="op">=</span><span class="st">'step-after'</span>,</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    line<span class="op">=</span><span class="va">True</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>).encode(</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span><span class="st">'Date:T'</span>,</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="st">'Number of Tickets per Month:Q'</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">

<style>
  #altair-viz-18f1c7b9019e4f1f96554b5f26e92d9a.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-18f1c7b9019e4f1f96554b5f26e92d9a.vega-embed details,
  #altair-viz-18f1c7b9019e4f1f96554b5f26e92d9a.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-18f1c7b9019e4f1f96554b5f26e92d9a"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-18f1c7b9019e4f1f96554b5f26e92d9a") {
      outputDiv = document.getElementById("altair-viz-18f1c7b9019e4f1f96554b5f26e92d9a");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "data": {"name": "data-469714720e4dffa1551264fe65d578a5"}, "mark": {"type": "area", "color": "lightblue", "interpolate": "step-after", "line": true}, "encoding": {"x": {"field": "Date", "type": "temporal"}, "y": {"field": "Number of Tickets per Month", "type": "quantitative"}}, "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-469714720e4dffa1551264fe65d578a5": [{"Date": "2007-01", "Number of Tickets per Month": 2480}, {"Date": "2007-02", "Number of Tickets per Month": 1824}, {"Date": "2007-03", "Number of Tickets per Month": 2409}, {"Date": "2007-04", "Number of Tickets per Month": 2553}, {"Date": "2007-05", "Number of Tickets per Month": 2594}, {"Date": "2007-06", "Number of Tickets per Month": 2431}, {"Date": "2007-07", "Number of Tickets per Month": 2700}, {"Date": "2007-08", "Number of Tickets per Month": 2729}, {"Date": "2007-09", "Number of Tickets per Month": 2477}, {"Date": "2007-10", "Number of Tickets per Month": 2675}, {"Date": "2007-11", "Number of Tickets per Month": 2390}, {"Date": "2007-12", "Number of Tickets per Month": 1990}, {"Date": "2008-01", "Number of Tickets per Month": 2254}, {"Date": "2008-02", "Number of Tickets per Month": 2444}, {"Date": "2008-03", "Number of Tickets per Month": 2443}, {"Date": "2008-04", "Number of Tickets per Month": 2652}, {"Date": "2008-05", "Number of Tickets per Month": 2420}, {"Date": "2008-06", "Number of Tickets per Month": 2347}, {"Date": "2008-07", "Number of Tickets per Month": 2588}, {"Date": "2008-08", "Number of Tickets per Month": 2528}, {"Date": "2008-09", "Number of Tickets per Month": 2438}, {"Date": "2008-10", "Number of Tickets per Month": 2588}, {"Date": "2008-11", "Number of Tickets per Month": 2227}, {"Date": "2008-12", "Number of Tickets per Month": 1784}, {"Date": "2009-01", "Number of Tickets per Month": 2055}, {"Date": "2009-02", "Number of Tickets per Month": 2027}, {"Date": "2009-03", "Number of Tickets per Month": 2270}, {"Date": "2009-04", "Number of Tickets per Month": 2724}, {"Date": "2009-05", "Number of Tickets per Month": 2513}, {"Date": "2009-06", "Number of Tickets per Month": 2402}, {"Date": "2009-07", "Number of Tickets per Month": 2504}, {"Date": "2009-08", "Number of Tickets per Month": 2393}, {"Date": "2009-09", "Number of Tickets per Month": 2362}, {"Date": "2009-10", "Number of Tickets per Month": 2340}, {"Date": "2009-11", "Number of Tickets per Month": 2087}, {"Date": "2009-12", "Number of Tickets per Month": 1658}, {"Date": "2010-01", "Number of Tickets per Month": 1934}, {"Date": "2010-02", "Number of Tickets per Month": 1693}, {"Date": "2010-03", "Number of Tickets per Month": 2008}, {"Date": "2010-04", "Number of Tickets per Month": 2099}, {"Date": "2010-05", "Number of Tickets per Month": 2157}, {"Date": "2010-06", "Number of Tickets per Month": 2152}, {"Date": "2010-07", "Number of Tickets per Month": 1986}, {"Date": "2010-08", "Number of Tickets per Month": 2485}, {"Date": "2010-09", "Number of Tickets per Month": 2441}, {"Date": "2010-10", "Number of Tickets per Month": 2388}, {"Date": "2010-11", "Number of Tickets per Month": 2194}, {"Date": "2010-12", "Number of Tickets per Month": 1787}, {"Date": "2011-01", "Number of Tickets per Month": 1968}, {"Date": "2011-02", "Number of Tickets per Month": 1380}, {"Date": "2011-03", "Number of Tickets per Month": 2102}, {"Date": "2011-04", "Number of Tickets per Month": 2257}, {"Date": "2011-05", "Number of Tickets per Month": 2208}, {"Date": "2011-06", "Number of Tickets per Month": 2298}, {"Date": "2011-07", "Number of Tickets per Month": 2355}, {"Date": "2011-08", "Number of Tickets per Month": 2347}, {"Date": "2011-09", "Number of Tickets per Month": 2113}, {"Date": "2011-10", "Number of Tickets per Month": 2141}, {"Date": "2011-11", "Number of Tickets per Month": 1966}, {"Date": "2011-12", "Number of Tickets per Month": 1763}, {"Date": "2012-01", "Number of Tickets per Month": 1676}, {"Date": "2012-02", "Number of Tickets per Month": 1797}, {"Date": "2012-03", "Number of Tickets per Month": 1898}, {"Date": "2012-04", "Number of Tickets per Month": 2054}, {"Date": "2012-05", "Number of Tickets per Month": 1995}, {"Date": "2012-06", "Number of Tickets per Month": 2156}, {"Date": "2012-07", "Number of Tickets per Month": 2305}, {"Date": "2012-08", "Number of Tickets per Month": 2368}, {"Date": "2012-09", "Number of Tickets per Month": 2061}, {"Date": "2012-10", "Number of Tickets per Month": 2274}, {"Date": "2012-11", "Number of Tickets per Month": 2023}, {"Date": "2012-12", "Number of Tickets per Month": 1799}, {"Date": "2013-01", "Number of Tickets per Month": 2117}, {"Date": "2013-02", "Number of Tickets per Month": 1717}, {"Date": "2013-03", "Number of Tickets per Month": 2102}, {"Date": "2013-04", "Number of Tickets per Month": 2383}, {"Date": "2013-05", "Number of Tickets per Month": 2260}, {"Date": "2013-06", "Number of Tickets per Month": 2133}, {"Date": "2013-07", "Number of Tickets per Month": 2543}, {"Date": "2013-08", "Number of Tickets per Month": 2496}, {"Date": "2013-09", "Number of Tickets per Month": 2191}, {"Date": "2013-10", "Number of Tickets per Month": 2311}, {"Date": "2013-11", "Number of Tickets per Month": 1997}, {"Date": "2013-12", "Number of Tickets per Month": 1733}, {"Date": "2014-01", "Number of Tickets per Month": 1732}, {"Date": "2014-02", "Number of Tickets per Month": 1785}, {"Date": "2014-03", "Number of Tickets per Month": 2136}, {"Date": "2014-04", "Number of Tickets per Month": 2372}, {"Date": "2014-05", "Number of Tickets per Month": 2244}, {"Date": "2014-06", "Number of Tickets per Month": 2169}, {"Date": "2014-07", "Number of Tickets per Month": 2184}, {"Date": "2014-08", "Number of Tickets per Month": 2145}, {"Date": "2014-09", "Number of Tickets per Month": 2100}, {"Date": "2014-10", "Number of Tickets per Month": 2170}, {"Date": "2014-11", "Number of Tickets per Month": 1795}, {"Date": "2014-12", "Number of Tickets per Month": 1720}, {"Date": "2015-01", "Number of Tickets per Month": 1786}, {"Date": "2015-02", "Number of Tickets per Month": 1378}, {"Date": "2015-03", "Number of Tickets per Month": 1929}, {"Date": "2015-04", "Number of Tickets per Month": 2145}, {"Date": "2015-05", "Number of Tickets per Month": 2134}, {"Date": "2015-06", "Number of Tickets per Month": 2251}, {"Date": "2015-07", "Number of Tickets per Month": 2279}, {"Date": "2015-08", "Number of Tickets per Month": 2197}, {"Date": "2015-09", "Number of Tickets per Month": 2182}, {"Date": "2015-10", "Number of Tickets per Month": 2222}, {"Date": "2015-11", "Number of Tickets per Month": 1935}, {"Date": "2015-12", "Number of Tickets per Month": 1789}, {"Date": "2016-01", "Number of Tickets per Month": 1773}, {"Date": "2016-02", "Number of Tickets per Month": 1609}, {"Date": "2016-03", "Number of Tickets per Month": 1793}, {"Date": "2016-04", "Number of Tickets per Month": 2097}, {"Date": "2016-05", "Number of Tickets per Month": 2059}, {"Date": "2016-06", "Number of Tickets per Month": 2013}, {"Date": "2016-07", "Number of Tickets per Month": 1865}, {"Date": "2016-08", "Number of Tickets per Month": 2037}, {"Date": "2016-09", "Number of Tickets per Month": 1901}, {"Date": "2016-10", "Number of Tickets per Month": 2089}, {"Date": "2016-11", "Number of Tickets per Month": 1883}, {"Date": "2016-12", "Number of Tickets per Month": 1524}, {"Date": "2017-01", "Number of Tickets per Month": 1865}, {"Date": "2017-02", "Number of Tickets per Month": 1604}, {"Date": "2017-03", "Number of Tickets per Month": 1770}, {"Date": "2017-04", "Number of Tickets per Month": 1925}, {"Date": "2017-05", "Number of Tickets per Month": 2010}, {"Date": "2017-06", "Number of Tickets per Month": 1995}, {"Date": "2017-07", "Number of Tickets per Month": 1975}, {"Date": "2017-08", "Number of Tickets per Month": 1993}, {"Date": "2017-09", "Number of Tickets per Month": 2015}, {"Date": "2017-10", "Number of Tickets per Month": 1952}, {"Date": "2017-11", "Number of Tickets per Month": 1816}, {"Date": "2017-12", "Number of Tickets per Month": 1444}, {"Date": "2018-01", "Number of Tickets per Month": 1675}, {"Date": "2018-02", "Number of Tickets per Month": 1384}, {"Date": "2018-03", "Number of Tickets per Month": 1865}, {"Date": "2018-04", "Number of Tickets per Month": 1996}, {"Date": "2018-05", "Number of Tickets per Month": 841}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
<p><strong>Solution:</strong> The Number of tickets issued is decreasing over time and looks like it is seasonal. The visual encoding channel is line.</p>
<ol type="1">
<li>Make a plot for the number of tickets issued by month and day by adapting the <a href="https://altair-viz.github.io/gallery/annual_weather_heatmap.html">Annual Weather Heatmap</a> example online. What visual encoding channel or channels does this use?</li>
</ol>
<div id="3adce14c" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># want to look at by calandar day for all years</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'date'</span>] <span class="op">=</span> df[<span class="st">'issue_date'</span>].dt.strftime(<span class="st">'%m-</span><span class="sc">%d</span><span class="st">'</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># count the number of tickets issued each day</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>daily_tickets <span class="op">=</span> df.groupby(<span class="st">'date'</span>).size().reset_index()</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>daily_tickets.columns <span class="op">=</span> [<span class="st">'date'</span>, <span class="st">'num_tickets'</span>]</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>alt.Chart(daily_tickets, title<span class="op">=</span><span class="st">"Number of Tickets in Chicago"</span>).mark_rect().encode(</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">"date(date):O"</span>).title(<span class="st">"Day"</span>).axis(<span class="bu">format</span><span class="op">=</span><span class="st">"</span><span class="sc">%e</span><span class="st">"</span>, labelAngle<span class="op">=</span><span class="dv">0</span>),</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">"month(date):O"</span>).title(<span class="st">"Month"</span>),</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    alt.Color(<span class="st">"max(num_tickets)"</span>).title(<span class="va">None</span>),</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    tooltip<span class="op">=</span>[</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>        alt.Tooltip(<span class="st">"monthdate(date)"</span>, title<span class="op">=</span><span class="st">"Date"</span>),</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>        alt.Tooltip(<span class="st">"max(num_tickets)"</span>, title<span class="op">=</span><span class="st">"Number of Tickets"</span>),</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>).configure_view(</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>    step<span class="op">=</span><span class="dv">13</span>,</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>    strokeWidth<span class="op">=</span><span class="dv">0</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>).configure_axis(</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>    domain<span class="op">=</span><span class="va">False</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">

<style>
  #altair-viz-badbce0f63a54a2098a6b0218ac7fa72.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-badbce0f63a54a2098a6b0218ac7fa72.vega-embed details,
  #altair-viz-badbce0f63a54a2098a6b0218ac7fa72.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-badbce0f63a54a2098a6b0218ac7fa72"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-badbce0f63a54a2098a6b0218ac7fa72") {
      outputDiv = document.getElementById("altair-viz-badbce0f63a54a2098a6b0218ac7fa72");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300, "step": 13, "strokeWidth": 0}, "axis": {"domain": false}}, "data": {"name": "data-a39041b944473c6ac5072c715fa55697"}, "mark": {"type": "rect"}, "encoding": {"color": {"aggregate": "max", "field": "num_tickets", "title": null, "type": "quantitative"}, "tooltip": [{"field": "date", "timeUnit": "monthdate", "title": "Date", "type": "temporal"}, {"aggregate": "max", "field": "num_tickets", "title": "Number of Tickets", "type": "quantitative"}], "x": {"axis": {"format": "%e", "labelAngle": 0}, "field": "date", "timeUnit": "date", "title": "Day", "type": "ordinal"}, "y": {"field": "date", "timeUnit": "month", "title": "Month", "type": "ordinal"}}, "title": "Number of Tickets in Chicago", "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-a39041b944473c6ac5072c715fa55697": [{"date": "01-01", "num_tickets": 559}, {"date": "01-02", "num_tickets": 780}, {"date": "01-03", "num_tickets": 860}, {"date": "01-04", "num_tickets": 876}, {"date": "01-05", "num_tickets": 836}, {"date": "01-06", "num_tickets": 710}, {"date": "01-07", "num_tickets": 704}, {"date": "01-08", "num_tickets": 769}, {"date": "01-09", "num_tickets": 781}, {"date": "01-10", "num_tickets": 850}, {"date": "01-11", "num_tickets": 812}, {"date": "01-12", "num_tickets": 846}, {"date": "01-13", "num_tickets": 754}, {"date": "01-14", "num_tickets": 749}, {"date": "01-15", "num_tickets": 770}, {"date": "01-16", "num_tickets": 677}, {"date": "01-17", "num_tickets": 719}, {"date": "01-18", "num_tickets": 708}, {"date": "01-19", "num_tickets": 734}, {"date": "01-20", "num_tickets": 677}, {"date": "01-21", "num_tickets": 697}, {"date": "01-22", "num_tickets": 746}, {"date": "01-23", "num_tickets": 740}, {"date": "01-24", "num_tickets": 709}, {"date": "01-25", "num_tickets": 802}, {"date": "01-26", "num_tickets": 738}, {"date": "01-27", "num_tickets": 703}, {"date": "01-28", "num_tickets": 749}, {"date": "01-29", "num_tickets": 766}, {"date": "01-30", "num_tickets": 786}, {"date": "01-31", "num_tickets": 708}, {"date": "02-01", "num_tickets": 731}, {"date": "02-02", "num_tickets": 672}, {"date": "02-03", "num_tickets": 742}, {"date": "02-04", "num_tickets": 664}, {"date": "02-05", "num_tickets": 690}, {"date": "02-06", "num_tickets": 658}, {"date": "02-07", "num_tickets": 714}, {"date": "02-08", "num_tickets": 784}, {"date": "02-09", "num_tickets": 692}, {"date": "02-10", "num_tickets": 695}, {"date": "02-11", "num_tickets": 732}, {"date": "02-12", "num_tickets": 500}, {"date": "02-13", "num_tickets": 694}, {"date": "02-14", "num_tickets": 672}, {"date": "02-15", "num_tickets": 660}, {"date": "02-16", "num_tickets": 733}, {"date": "02-17", "num_tickets": 653}, {"date": "02-18", "num_tickets": 845}, {"date": "02-19", "num_tickets": 768}, {"date": "02-20", "num_tickets": 755}, {"date": "02-21", "num_tickets": 731}, {"date": "02-22", "num_tickets": 800}, {"date": "02-23", "num_tickets": 838}, {"date": "02-24", "num_tickets": 782}, {"date": "02-25", "num_tickets": 861}, {"date": "02-26", "num_tickets": 746}, {"date": "02-27", "num_tickets": 770}, {"date": "02-28", "num_tickets": 838}, {"date": "02-29", "num_tickets": 222}, {"date": "03-01", "num_tickets": 835}, {"date": "03-02", "num_tickets": 837}, {"date": "03-03", "num_tickets": 861}, {"date": "03-04", "num_tickets": 846}, {"date": "03-05", "num_tickets": 708}, {"date": "03-06", "num_tickets": 823}, {"date": "03-07", "num_tickets": 759}, {"date": "03-08", "num_tickets": 857}, {"date": "03-09", "num_tickets": 864}, {"date": "03-10", "num_tickets": 856}, {"date": "03-11", "num_tickets": 821}, {"date": "03-12", "num_tickets": 821}, {"date": "03-13", "num_tickets": 792}, {"date": "03-14", "num_tickets": 791}, {"date": "03-15", "num_tickets": 779}, {"date": "03-16", "num_tickets": 799}, {"date": "03-17", "num_tickets": 828}, {"date": "03-18", "num_tickets": 798}, {"date": "03-19", "num_tickets": 821}, {"date": "03-20", "num_tickets": 790}, {"date": "03-21", "num_tickets": 757}, {"date": "03-22", "num_tickets": 721}, {"date": "03-23", "num_tickets": 712}, {"date": "03-24", "num_tickets": 768}, {"date": "03-25", "num_tickets": 733}, {"date": "03-26", "num_tickets": 821}, {"date": "03-27", "num_tickets": 797}, {"date": "03-28", "num_tickets": 818}, {"date": "03-29", "num_tickets": 709}, {"date": "03-30", "num_tickets": 800}, {"date": "03-31", "num_tickets": 803}, {"date": "04-01", "num_tickets": 1031}, {"date": "04-02", "num_tickets": 1019}, {"date": "04-03", "num_tickets": 999}, {"date": "04-04", "num_tickets": 976}, {"date": "04-05", "num_tickets": 897}, {"date": "04-06", "num_tickets": 930}, {"date": "04-07", "num_tickets": 938}, {"date": "04-08", "num_tickets": 912}, {"date": "04-09", "num_tickets": 1017}, {"date": "04-10", "num_tickets": 919}, {"date": "04-11", "num_tickets": 950}, {"date": "04-12", "num_tickets": 828}, {"date": "04-13", "num_tickets": 903}, {"date": "04-14", "num_tickets": 829}, {"date": "04-15", "num_tickets": 893}, {"date": "04-16", "num_tickets": 948}, {"date": "04-17", "num_tickets": 1008}, {"date": "04-18", "num_tickets": 874}, {"date": "04-19", "num_tickets": 830}, {"date": "04-20", "num_tickets": 882}, {"date": "04-21", "num_tickets": 922}, {"date": "04-22", "num_tickets": 843}, {"date": "04-23", "num_tickets": 979}, {"date": "04-24", "num_tickets": 857}, {"date": "04-25", "num_tickets": 848}, {"date": "04-26", "num_tickets": 774}, {"date": "04-27", "num_tickets": 850}, {"date": "04-28", "num_tickets": 836}, {"date": "04-29", "num_tickets": 870}, {"date": "04-30", "num_tickets": 895}, {"date": "05-01", "num_tickets": 974}, {"date": "05-02", "num_tickets": 969}, {"date": "05-03", "num_tickets": 902}, {"date": "05-04", "num_tickets": 865}, {"date": "05-05", "num_tickets": 930}, {"date": "05-06", "num_tickets": 864}, {"date": "05-07", "num_tickets": 951}, {"date": "05-08", "num_tickets": 937}, {"date": "05-09", "num_tickets": 835}, {"date": "05-10", "num_tickets": 802}, {"date": "05-11", "num_tickets": 867}, {"date": "05-12", "num_tickets": 841}, {"date": "05-13", "num_tickets": 865}, {"date": "05-14", "num_tickets": 868}, {"date": "05-15", "num_tickets": 749}, {"date": "05-16", "num_tickets": 847}, {"date": "05-17", "num_tickets": 793}, {"date": "05-18", "num_tickets": 827}, {"date": "05-19", "num_tickets": 766}, {"date": "05-20", "num_tickets": 851}, {"date": "05-21", "num_tickets": 803}, {"date": "05-22", "num_tickets": 814}, {"date": "05-23", "num_tickets": 766}, {"date": "05-24", "num_tickets": 725}, {"date": "05-25", "num_tickets": 700}, {"date": "05-26", "num_tickets": 710}, {"date": "05-27", "num_tickets": 749}, {"date": "05-28", "num_tickets": 745}, {"date": "05-29", "num_tickets": 755}, {"date": "05-30", "num_tickets": 734}, {"date": "05-31", "num_tickets": 631}, {"date": "06-01", "num_tickets": 931}, {"date": "06-02", "num_tickets": 927}, {"date": "06-03", "num_tickets": 914}, {"date": "06-04", "num_tickets": 887}, {"date": "06-05", "num_tickets": 864}, {"date": "06-06", "num_tickets": 862}, {"date": "06-07", "num_tickets": 810}, {"date": "06-08", "num_tickets": 805}, {"date": "06-09", "num_tickets": 851}, {"date": "06-10", "num_tickets": 813}, {"date": "06-11", "num_tickets": 836}, {"date": "06-12", "num_tickets": 821}, {"date": "06-13", "num_tickets": 835}, {"date": "06-14", "num_tickets": 736}, {"date": "06-15", "num_tickets": 760}, {"date": "06-16", "num_tickets": 859}, {"date": "06-17", "num_tickets": 747}, {"date": "06-18", "num_tickets": 801}, {"date": "06-19", "num_tickets": 773}, {"date": "06-20", "num_tickets": 778}, {"date": "06-21", "num_tickets": 678}, {"date": "06-22", "num_tickets": 803}, {"date": "06-23", "num_tickets": 825}, {"date": "06-24", "num_tickets": 792}, {"date": "06-25", "num_tickets": 808}, {"date": "06-26", "num_tickets": 798}, {"date": "06-27", "num_tickets": 770}, {"date": "06-28", "num_tickets": 729}, {"date": "06-29", "num_tickets": 750}, {"date": "06-30", "num_tickets": 784}, {"date": "07-01", "num_tickets": 950}, {"date": "07-02", "num_tickets": 947}, {"date": "07-03", "num_tickets": 776}, {"date": "07-04", "num_tickets": 400}, {"date": "07-05", "num_tickets": 641}, {"date": "07-06", "num_tickets": 783}, {"date": "07-07", "num_tickets": 804}, {"date": "07-08", "num_tickets": 829}, {"date": "07-09", "num_tickets": 803}, {"date": "07-10", "num_tickets": 777}, {"date": "07-11", "num_tickets": 766}, {"date": "07-12", "num_tickets": 719}, {"date": "07-13", "num_tickets": 765}, {"date": "07-14", "num_tickets": 823}, {"date": "07-15", "num_tickets": 794}, {"date": "07-16", "num_tickets": 1008}, {"date": "07-17", "num_tickets": 992}, {"date": "07-18", "num_tickets": 916}, {"date": "07-19", "num_tickets": 865}, {"date": "07-20", "num_tickets": 847}, {"date": "07-21", "num_tickets": 819}, {"date": "07-22", "num_tickets": 866}, {"date": "07-23", "num_tickets": 824}, {"date": "07-24", "num_tickets": 874}, {"date": "07-25", "num_tickets": 857}, {"date": "07-26", "num_tickets": 781}, {"date": "07-27", "num_tickets": 787}, {"date": "07-28", "num_tickets": 788}, {"date": "07-29", "num_tickets": 824}, {"date": "07-30", "num_tickets": 852}, {"date": "07-31", "num_tickets": 807}, {"date": "08-01", "num_tickets": 945}, {"date": "08-02", "num_tickets": 896}, {"date": "08-03", "num_tickets": 924}, {"date": "08-04", "num_tickets": 837}, {"date": "08-05", "num_tickets": 879}, {"date": "08-06", "num_tickets": 860}, {"date": "08-07", "num_tickets": 857}, {"date": "08-08", "num_tickets": 838}, {"date": "08-09", "num_tickets": 797}, {"date": "08-10", "num_tickets": 825}, {"date": "08-11", "num_tickets": 849}, {"date": "08-12", "num_tickets": 787}, {"date": "08-13", "num_tickets": 847}, {"date": "08-14", "num_tickets": 852}, {"date": "08-15", "num_tickets": 838}, {"date": "08-16", "num_tickets": 762}, {"date": "08-17", "num_tickets": 811}, {"date": "08-18", "num_tickets": 818}, {"date": "08-19", "num_tickets": 841}, {"date": "08-20", "num_tickets": 824}, {"date": "08-21", "num_tickets": 835}, {"date": "08-22", "num_tickets": 770}, {"date": "08-23", "num_tickets": 755}, {"date": "08-24", "num_tickets": 805}, {"date": "08-25", "num_tickets": 829}, {"date": "08-26", "num_tickets": 798}, {"date": "08-27", "num_tickets": 814}, {"date": "08-28", "num_tickets": 876}, {"date": "08-29", "num_tickets": 823}, {"date": "08-30", "num_tickets": 770}, {"date": "08-31", "num_tickets": 756}, {"date": "09-01", "num_tickets": 876}, {"date": "09-02", "num_tickets": 841}, {"date": "09-03", "num_tickets": 827}, {"date": "09-04", "num_tickets": 842}, {"date": "09-05", "num_tickets": 729}, {"date": "09-06", "num_tickets": 790}, {"date": "09-07", "num_tickets": 737}, {"date": "09-08", "num_tickets": 835}, {"date": "09-09", "num_tickets": 846}, {"date": "09-10", "num_tickets": 823}, {"date": "09-11", "num_tickets": 855}, {"date": "09-12", "num_tickets": 809}, {"date": "09-13", "num_tickets": 756}, {"date": "09-14", "num_tickets": 790}, {"date": "09-15", "num_tickets": 807}, {"date": "09-16", "num_tickets": 805}, {"date": "09-17", "num_tickets": 841}, {"date": "09-18", "num_tickets": 762}, {"date": "09-19", "num_tickets": 842}, {"date": "09-20", "num_tickets": 790}, {"date": "09-21", "num_tickets": 795}, {"date": "09-22", "num_tickets": 809}, {"date": "09-23", "num_tickets": 807}, {"date": "09-24", "num_tickets": 798}, {"date": "09-25", "num_tickets": 874}, {"date": "09-26", "num_tickets": 811}, {"date": "09-27", "num_tickets": 772}, {"date": "09-28", "num_tickets": 795}, {"date": "09-29", "num_tickets": 819}, {"date": "09-30", "num_tickets": 798}, {"date": "10-01", "num_tickets": 1059}, {"date": "10-02", "num_tickets": 925}, {"date": "10-03", "num_tickets": 882}, {"date": "10-04", "num_tickets": 826}, {"date": "10-05", "num_tickets": 902}, {"date": "10-06", "num_tickets": 825}, {"date": "10-07", "num_tickets": 817}, {"date": "10-08", "num_tickets": 758}, {"date": "10-09", "num_tickets": 789}, {"date": "10-10", "num_tickets": 722}, {"date": "10-11", "num_tickets": 731}, {"date": "10-12", "num_tickets": 716}, {"date": "10-13", "num_tickets": 762}, {"date": "10-14", "num_tickets": 793}, {"date": "10-15", "num_tickets": 856}, {"date": "10-16", "num_tickets": 858}, {"date": "10-17", "num_tickets": 818}, {"date": "10-18", "num_tickets": 814}, {"date": "10-19", "num_tickets": 834}, {"date": "10-20", "num_tickets": 830}, {"date": "10-21", "num_tickets": 871}, {"date": "10-22", "num_tickets": 827}, {"date": "10-23", "num_tickets": 757}, {"date": "10-24", "num_tickets": 817}, {"date": "10-25", "num_tickets": 746}, {"date": "10-26", "num_tickets": 755}, {"date": "10-27", "num_tickets": 801}, {"date": "10-28", "num_tickets": 781}, {"date": "10-29", "num_tickets": 819}, {"date": "10-30", "num_tickets": 775}, {"date": "10-31", "num_tickets": 684}, {"date": "11-01", "num_tickets": 929}, {"date": "11-02", "num_tickets": 892}, {"date": "11-03", "num_tickets": 922}, {"date": "11-04", "num_tickets": 786}, {"date": "11-05", "num_tickets": 846}, {"date": "11-06", "num_tickets": 834}, {"date": "11-07", "num_tickets": 818}, {"date": "11-08", "num_tickets": 757}, {"date": "11-09", "num_tickets": 807}, {"date": "11-10", "num_tickets": 808}, {"date": "11-11", "num_tickets": 538}, {"date": "11-12", "num_tickets": 766}, {"date": "11-13", "num_tickets": 818}, {"date": "11-14", "num_tickets": 827}, {"date": "11-15", "num_tickets": 766}, {"date": "11-16", "num_tickets": 837}, {"date": "11-17", "num_tickets": 779}, {"date": "11-18", "num_tickets": 760}, {"date": "11-19", "num_tickets": 835}, {"date": "11-20", "num_tickets": 727}, {"date": "11-21", "num_tickets": 749}, {"date": "11-22", "num_tickets": 569}, {"date": "11-23", "num_tickets": 656}, {"date": "11-24", "num_tickets": 600}, {"date": "11-25", "num_tickets": 631}, {"date": "11-26", "num_tickets": 563}, {"date": "11-27", "num_tickets": 542}, {"date": "11-28", "num_tickets": 612}, {"date": "11-29", "num_tickets": 655}, {"date": "11-30", "num_tickets": 684}, {"date": "12-01", "num_tickets": 888}, {"date": "12-02", "num_tickets": 846}, {"date": "12-03", "num_tickets": 829}, {"date": "12-04", "num_tickets": 760}, {"date": "12-05", "num_tickets": 717}, {"date": "12-06", "num_tickets": 677}, {"date": "12-07", "num_tickets": 704}, {"date": "12-08", "num_tickets": 682}, {"date": "12-09", "num_tickets": 643}, {"date": "12-10", "num_tickets": 728}, {"date": "12-11", "num_tickets": 670}, {"date": "12-12", "num_tickets": 611}, {"date": "12-13", "num_tickets": 620}, {"date": "12-14", "num_tickets": 644}, {"date": "12-15", "num_tickets": 576}, {"date": "12-16", "num_tickets": 642}, {"date": "12-17", "num_tickets": 607}, {"date": "12-18", "num_tickets": 621}, {"date": "12-19", "num_tickets": 548}, {"date": "12-20", "num_tickets": 614}, {"date": "12-21", "num_tickets": 566}, {"date": "12-22", "num_tickets": 547}, {"date": "12-23", "num_tickets": 534}, {"date": "12-24", "num_tickets": 444}, {"date": "12-25", "num_tickets": 165}, {"date": "12-26", "num_tickets": 434}, {"date": "12-27", "num_tickets": 532}, {"date": "12-28", "num_tickets": 517}, {"date": "12-29", "num_tickets": 578}, {"date": "12-30", "num_tickets": 520}, {"date": "12-31", "num_tickets": 527}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
<p><strong>Solution:</strong> Christmas and 4th of july have very few tickets issued more tickets at the start of the month visual encoding channel is color</p>
<ol start="4" type="1">
<li>Subset to the five most common types of violations. Make a plot for the number of tickets issued over time by adapting the <a href="https://altair-viz.github.io/gallery/lasagna_plot.html">Lasagna Plot</a> example online. What visual encoding channel or channels does this use?</li>
</ol>
<div id="edacc983" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># index at the end only keeps the names of the violations</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>five_most_common <span class="op">=</span> df[<span class="st">'violation_description'</span>].value_counts().head(<span class="dv">5</span>).index</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>five_most_common_df <span class="op">=</span> df[df[<span class="st">'violation_description'</span>].isin(five_most_common)].copy()</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co"># again aggregate to the month level</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>five_most_common_df.loc[:, <span class="st">'date'</span>] <span class="op">=</span> five_most_common_df[<span class="st">'issue_date'</span>].dt.strftime(<span class="st">'%Y-%m'</span>)</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co"># make violation description title case</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>five_most_common_df[<span class="st">'violation_description'</span>] <span class="op">=</span> five_most_common_df[<span class="st">'violation_description'</span>].<span class="bu">str</span>.title()</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="co"># again aggregate to the month level</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>five_most_common_df[<span class="st">'date'</span>] <span class="op">=</span> five_most_common_df[<span class="st">'issue_date'</span>].dt.strftime(<span class="st">'%Y-%m'</span>)</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>five_most_common_df <span class="op">=</span> five_most_common_df.groupby([<span class="st">'date'</span>, <span class="st">'violation_description'</span>]).size().reset_index()</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>five_most_common_df.columns <span class="op">=</span> [<span class="st">'date'</span>, <span class="st">'violation_description'</span>, <span class="st">'num_tickets'</span>]</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>color_condition <span class="op">=</span> alt.condition(</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"month(datum.value) == 1 &amp;&amp; date(datum.value) == 1"</span>,</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>    alt.value(<span class="st">"black"</span>),</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>    alt.value(<span class="va">None</span>),</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>alt.Chart(five_most_common_df, width<span class="op">=</span><span class="dv">300</span>, height<span class="op">=</span><span class="dv">100</span>).transform_filter(</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>    alt.datum.symbol <span class="op">!=</span> <span class="st">"GOOG"</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>).mark_rect().encode(</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>    alt.X(<span class="st">"yearmonth(date):O"</span>)</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>        .title(<span class="st">"Time"</span>)</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>        .axis(</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>            <span class="bu">format</span><span class="op">=</span><span class="st">"%Y"</span>,</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>            labelAngle<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>            labelOverlap<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>            labelColor<span class="op">=</span>color_condition,</span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>            tickColor<span class="op">=</span>color_condition,</span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a>    alt.Y(<span class="st">"violation_description:N"</span>).title(<span class="va">None</span>),</span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a>    alt.Color(<span class="st">"sum(num_tickets)"</span>).title(<span class="st">"Num Tickets per Month"</span>)</span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a>).configure_axis( <span class="co"># Configure the axis so that the labels are not cut off</span></span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a>    labelFontSize<span class="op">=</span><span class="dv">8</span>,</span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a>    labelLimit<span class="op">=</span><span class="dv">400</span></span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">

<style>
  #altair-viz-85f9e947f4bb4dd9b50f09154f998f8b.vega-embed {
    width: 100%;
    display: flex;
  }

  #altair-viz-85f9e947f4bb4dd9b50f09154f998f8b.vega-embed details,
  #altair-viz-85f9e947f4bb4dd9b50f09154f998f8b.vega-embed details summary {
    position: relative;
  }
</style>
<div id="altair-viz-85f9e947f4bb4dd9b50f09154f998f8b"></div>
<script type="text/javascript">
  var VEGA_DEBUG = (typeof VEGA_DEBUG == "undefined") ? {} : VEGA_DEBUG;
  (function(spec, embedOpt){
    let outputDiv = document.currentScript.previousElementSibling;
    if (outputDiv.id !== "altair-viz-85f9e947f4bb4dd9b50f09154f998f8b") {
      outputDiv = document.getElementById("altair-viz-85f9e947f4bb4dd9b50f09154f998f8b");
    }
    const paths = {
      "vega": "https://cdn.jsdelivr.net/npm/vega@5?noext",
      "vega-lib": "https://cdn.jsdelivr.net/npm/vega-lib?noext",
      "vega-lite": "https://cdn.jsdelivr.net/npm/vega-lite@5.8.0?noext",
      "vega-embed": "https://cdn.jsdelivr.net/npm/vega-embed@6?noext",
    };

    function maybeLoadScript(lib, version) {
      var key = `${lib.replace("-", "")}_version`;
      return (VEGA_DEBUG[key] == version) ?
        Promise.resolve(paths[lib]) :
        new Promise(function(resolve, reject) {
          var s = document.createElement('script');
          document.getElementsByTagName("head")[0].appendChild(s);
          s.async = true;
          s.onload = () => {
            VEGA_DEBUG[key] = version;
            return resolve(paths[lib]);
          };
          s.onerror = () => reject(`Error loading script: ${paths[lib]}`);
          s.src = paths[lib];
        });
    }

    function showError(err) {
      outputDiv.innerHTML = `<div class="error" style="color:red;">${err}</div>`;
      throw err;
    }

    function displayChart(vegaEmbed) {
      vegaEmbed(outputDiv, spec, embedOpt)
        .catch(err => showError(`Javascript Error: ${err.message}<br>This usually means there's a typo in your chart specification. See the javascript console for the full traceback.`));
    }

    if(typeof define === "function" && define.amd) {
      requirejs.config({paths});
      require(["vega-embed"], displayChart, err => showError(`Error loading script: ${err.message}`));
    } else {
      maybeLoadScript("vega", "5")
        .then(() => maybeLoadScript("vega-lite", "5.8.0"))
        .then(() => maybeLoadScript("vega-embed", "6"))
        .catch(showError)
        .then(() => displayChart(vegaEmbed));
    }
  })({"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}, "axis": {"labelFontSize": 8, "labelLimit": 400}}, "data": {"name": "data-2488c88ddca7acdc27ce871f1b69ca30"}, "mark": {"type": "rect"}, "encoding": {"color": {"aggregate": "sum", "field": "num_tickets", "title": "Num Tickets per Month", "type": "quantitative"}, "x": {"axis": {"format": "%Y", "labelAngle": 0, "labelOverlap": false, "labelColor": {"condition": {"test": "month(datum.value) == 1 && date(datum.value) == 1", "value": "black"}, "value": null}, "tickColor": {"condition": {"test": "month(datum.value) == 1 && date(datum.value) == 1", "value": "black"}, "value": null}}, "field": "date", "timeUnit": "yearmonth", "title": "Time", "type": "ordinal"}, "y": {"field": "violation_description", "title": null, "type": "nominal"}}, "height": 100, "transform": [{"filter": "(datum.symbol !== 'GOOG')"}], "width": 300, "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json", "datasets": {"data-2488c88ddca7acdc27ce871f1b69ca30": [{"date": "2007-01", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 285}, {"date": "2007-01", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 458}, {"date": "2007-01", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 232}, {"date": "2007-01", "violation_description": "Residential Permit Parking", "num_tickets": 247}, {"date": "2007-02", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 222}, {"date": "2007-02", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 237}, {"date": "2007-02", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 203}, {"date": "2007-02", "violation_description": "Residential Permit Parking", "num_tickets": 170}, {"date": "2007-03", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 288}, {"date": "2007-03", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 341}, {"date": "2007-03", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 228}, {"date": "2007-03", "violation_description": "Residential Permit Parking", "num_tickets": 280}, {"date": "2007-04", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 251}, {"date": "2007-04", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 323}, {"date": "2007-04", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 180}, {"date": "2007-04", "violation_description": "Residential Permit Parking", "num_tickets": 220}, {"date": "2007-05", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 255}, {"date": "2007-05", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 358}, {"date": "2007-05", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 215}, {"date": "2007-05", "violation_description": "Residential Permit Parking", "num_tickets": 231}, {"date": "2007-06", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 274}, {"date": "2007-06", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 345}, {"date": "2007-06", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 216}, {"date": "2007-06", "violation_description": "Residential Permit Parking", "num_tickets": 198}, {"date": "2007-07", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 221}, {"date": "2007-07", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 349}, {"date": "2007-07", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 193}, {"date": "2007-07", "violation_description": "Residential Permit Parking", "num_tickets": 233}, {"date": "2007-08", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 258}, {"date": "2007-08", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 316}, {"date": "2007-08", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 206}, {"date": "2007-08", "violation_description": "Residential Permit Parking", "num_tickets": 236}, {"date": "2007-09", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 235}, {"date": "2007-09", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 369}, {"date": "2007-09", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 177}, {"date": "2007-09", "violation_description": "Residential Permit Parking", "num_tickets": 239}, {"date": "2007-09", "violation_description": "Street Cleaning", "num_tickets": 1}, {"date": "2007-10", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 237}, {"date": "2007-10", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 373}, {"date": "2007-10", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 194}, {"date": "2007-10", "violation_description": "Residential Permit Parking", "num_tickets": 249}, {"date": "2007-10", "violation_description": "Street Cleaning", "num_tickets": 2}, {"date": "2007-11", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 238}, {"date": "2007-11", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 339}, {"date": "2007-11", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 200}, {"date": "2007-11", "violation_description": "Residential Permit Parking", "num_tickets": 228}, {"date": "2007-11", "violation_description": "Street Cleaning", "num_tickets": 9}, {"date": "2007-12", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 307}, {"date": "2007-12", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 352}, {"date": "2007-12", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 162}, {"date": "2007-12", "violation_description": "Residential Permit Parking", "num_tickets": 187}, {"date": "2007-12", "violation_description": "Street Cleaning", "num_tickets": 1}, {"date": "2008-01", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 288}, {"date": "2008-01", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 495}, {"date": "2008-01", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 175}, {"date": "2008-01", "violation_description": "Residential Permit Parking", "num_tickets": 184}, {"date": "2008-01", "violation_description": "Street Cleaning", "num_tickets": 1}, {"date": "2008-02", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 143}, {"date": "2008-02", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 352}, {"date": "2008-02", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 242}, {"date": "2008-02", "violation_description": "Residential Permit Parking", "num_tickets": 201}, {"date": "2008-02", "violation_description": "Street Cleaning", "num_tickets": 1}, {"date": "2008-03", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 1}, {"date": "2008-03", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 345}, {"date": "2008-03", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 235}, {"date": "2008-03", "violation_description": "Residential Permit Parking", "num_tickets": 250}, {"date": "2008-03", "violation_description": "Street Cleaning", "num_tickets": 5}, {"date": "2008-04", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 388}, {"date": "2008-04", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 197}, {"date": "2008-04", "violation_description": "Residential Permit Parking", "num_tickets": 226}, {"date": "2008-04", "violation_description": "Street Cleaning", "num_tickets": 562}, {"date": "2008-05", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 359}, {"date": "2008-05", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 171}, {"date": "2008-05", "violation_description": "Residential Permit Parking", "num_tickets": 186}, {"date": "2008-05", "violation_description": "Street Cleaning", "num_tickets": 480}, {"date": "2008-06", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 347}, {"date": "2008-06", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 156}, {"date": "2008-06", "violation_description": "Residential Permit Parking", "num_tickets": 170}, {"date": "2008-06", "violation_description": "Street Cleaning", "num_tickets": 463}, {"date": "2008-07", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 356}, {"date": "2008-07", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 159}, {"date": "2008-07", "violation_description": "Residential Permit Parking", "num_tickets": 194}, {"date": "2008-07", "violation_description": "Street Cleaning", "num_tickets": 409}, {"date": "2008-08", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 363}, {"date": "2008-08", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 167}, {"date": "2008-08", "violation_description": "Residential Permit Parking", "num_tickets": 239}, {"date": "2008-08", "violation_description": "Street Cleaning", "num_tickets": 348}, {"date": "2008-09", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 366}, {"date": "2008-09", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 158}, {"date": "2008-09", "violation_description": "Residential Permit Parking", "num_tickets": 214}, {"date": "2008-09", "violation_description": "Street Cleaning", "num_tickets": 363}, {"date": "2008-10", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 407}, {"date": "2008-10", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 153}, {"date": "2008-10", "violation_description": "Residential Permit Parking", "num_tickets": 224}, {"date": "2008-10", "violation_description": "Street Cleaning", "num_tickets": 411}, {"date": "2008-11", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 393}, {"date": "2008-11", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 155}, {"date": "2008-11", "violation_description": "Residential Permit Parking", "num_tickets": 203}, {"date": "2008-11", "violation_description": "Street Cleaning", "num_tickets": 212}, {"date": "2008-12", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 372}, {"date": "2008-12", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 136}, {"date": "2008-12", "violation_description": "Residential Permit Parking", "num_tickets": 150}, {"date": "2009-01", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 497}, {"date": "2009-01", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 182}, {"date": "2009-01", "violation_description": "Residential Permit Parking", "num_tickets": 183}, {"date": "2009-01", "violation_description": "Street Cleaning", "num_tickets": 1}, {"date": "2009-02", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 349}, {"date": "2009-02", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 183}, {"date": "2009-02", "violation_description": "Residential Permit Parking", "num_tickets": 180}, {"date": "2009-02", "violation_description": "Street Cleaning", "num_tickets": 1}, {"date": "2009-03", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 383}, {"date": "2009-03", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 161}, {"date": "2009-03", "violation_description": "Residential Permit Parking", "num_tickets": 236}, {"date": "2009-03", "violation_description": "Street Cleaning", "num_tickets": 3}, {"date": "2009-04", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 366}, {"date": "2009-04", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 178}, {"date": "2009-04", "violation_description": "Residential Permit Parking", "num_tickets": 214}, {"date": "2009-04", "violation_description": "Street Cleaning", "num_tickets": 416}, {"date": "2009-05", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 343}, {"date": "2009-05", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 182}, {"date": "2009-05", "violation_description": "Residential Permit Parking", "num_tickets": 249}, {"date": "2009-05", "violation_description": "Street Cleaning", "num_tickets": 336}, {"date": "2009-06", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 419}, {"date": "2009-06", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 183}, {"date": "2009-06", "violation_description": "Residential Permit Parking", "num_tickets": 183}, {"date": "2009-06", "violation_description": "Street Cleaning", "num_tickets": 350}, {"date": "2009-07", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 378}, {"date": "2009-07", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 158}, {"date": "2009-07", "violation_description": "Residential Permit Parking", "num_tickets": 147}, {"date": "2009-07", "violation_description": "Street Cleaning", "num_tickets": 324}, {"date": "2009-08", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 382}, {"date": "2009-08", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 136}, {"date": "2009-08", "violation_description": "Residential Permit Parking", "num_tickets": 202}, {"date": "2009-08", "violation_description": "Street Cleaning", "num_tickets": 301}, {"date": "2009-09", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 399}, {"date": "2009-09", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 158}, {"date": "2009-09", "violation_description": "Residential Permit Parking", "num_tickets": 213}, {"date": "2009-09", "violation_description": "Street Cleaning", "num_tickets": 322}, {"date": "2009-10", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 375}, {"date": "2009-10", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 155}, {"date": "2009-10", "violation_description": "Residential Permit Parking", "num_tickets": 194}, {"date": "2009-10", "violation_description": "Street Cleaning", "num_tickets": 362}, {"date": "2009-11", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 353}, {"date": "2009-11", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 142}, {"date": "2009-11", "violation_description": "Residential Permit Parking", "num_tickets": 174}, {"date": "2009-11", "violation_description": "Street Cleaning", "num_tickets": 209}, {"date": "2009-12", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 360}, {"date": "2009-12", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 124}, {"date": "2009-12", "violation_description": "Residential Permit Parking", "num_tickets": 160}, {"date": "2009-12", "violation_description": "Street Cleaning", "num_tickets": 3}, {"date": "2010-01", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 481}, {"date": "2010-01", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 142}, {"date": "2010-01", "violation_description": "Residential Permit Parking", "num_tickets": 148}, {"date": "2010-01", "violation_description": "Street Cleaning", "num_tickets": 1}, {"date": "2010-02", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 283}, {"date": "2010-02", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 145}, {"date": "2010-02", "violation_description": "Residential Permit Parking", "num_tickets": 159}, {"date": "2010-03", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 331}, {"date": "2010-03", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 159}, {"date": "2010-03", "violation_description": "Residential Permit Parking", "num_tickets": 203}, {"date": "2010-03", "violation_description": "Street Cleaning", "num_tickets": 2}, {"date": "2010-04", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 283}, {"date": "2010-04", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 134}, {"date": "2010-04", "violation_description": "Residential Permit Parking", "num_tickets": 189}, {"date": "2010-04", "violation_description": "Street Cleaning", "num_tickets": 385}, {"date": "2010-05", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 325}, {"date": "2010-05", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 124}, {"date": "2010-05", "violation_description": "Residential Permit Parking", "num_tickets": 212}, {"date": "2010-05", "violation_description": "Street Cleaning", "num_tickets": 348}, {"date": "2010-06", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 366}, {"date": "2010-06", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 142}, {"date": "2010-06", "violation_description": "Residential Permit Parking", "num_tickets": 196}, {"date": "2010-06", "violation_description": "Street Cleaning", "num_tickets": 378}, {"date": "2010-07", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 349}, {"date": "2010-07", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 130}, {"date": "2010-07", "violation_description": "Residential Permit Parking", "num_tickets": 57}, {"date": "2010-07", "violation_description": "Street Cleaning", "num_tickets": 306}, {"date": "2010-08", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 323}, {"date": "2010-08", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 105}, {"date": "2010-08", "violation_description": "Residential Permit Parking", "num_tickets": 192}, {"date": "2010-08", "violation_description": "Street Cleaning", "num_tickets": 355}, {"date": "2010-09", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 362}, {"date": "2010-09", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 132}, {"date": "2010-09", "violation_description": "Residential Permit Parking", "num_tickets": 191}, {"date": "2010-09", "violation_description": "Street Cleaning", "num_tickets": 363}, {"date": "2010-10", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 393}, {"date": "2010-10", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 144}, {"date": "2010-10", "violation_description": "Residential Permit Parking", "num_tickets": 186}, {"date": "2010-10", "violation_description": "Street Cleaning", "num_tickets": 312}, {"date": "2010-11", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 391}, {"date": "2010-11", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 166}, {"date": "2010-11", "violation_description": "Residential Permit Parking", "num_tickets": 166}, {"date": "2010-11", "violation_description": "Street Cleaning", "num_tickets": 211}, {"date": "2010-12", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 367}, {"date": "2010-12", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 105}, {"date": "2010-12", "violation_description": "Residential Permit Parking", "num_tickets": 151}, {"date": "2010-12", "violation_description": "Street Cleaning", "num_tickets": 3}, {"date": "2011-01", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 481}, {"date": "2011-01", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 114}, {"date": "2011-01", "violation_description": "Residential Permit Parking", "num_tickets": 162}, {"date": "2011-02", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 253}, {"date": "2011-02", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 128}, {"date": "2011-02", "violation_description": "Residential Permit Parking", "num_tickets": 90}, {"date": "2011-03", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 396}, {"date": "2011-03", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 148}, {"date": "2011-03", "violation_description": "Residential Permit Parking", "num_tickets": 166}, {"date": "2011-03", "violation_description": "Street Cleaning", "num_tickets": 2}, {"date": "2011-04", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 344}, {"date": "2011-04", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 128}, {"date": "2011-04", "violation_description": "Residential Permit Parking", "num_tickets": 183}, {"date": "2011-04", "violation_description": "Street Cleaning", "num_tickets": 412}, {"date": "2011-05", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 347}, {"date": "2011-05", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 157}, {"date": "2011-05", "violation_description": "Residential Permit Parking", "num_tickets": 157}, {"date": "2011-05", "violation_description": "Street Cleaning", "num_tickets": 367}, {"date": "2011-06", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 417}, {"date": "2011-06", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 156}, {"date": "2011-06", "violation_description": "Residential Permit Parking", "num_tickets": 164}, {"date": "2011-06", "violation_description": "Street Cleaning", "num_tickets": 405}, {"date": "2011-07", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 368}, {"date": "2011-07", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 139}, {"date": "2011-07", "violation_description": "Residential Permit Parking", "num_tickets": 158}, {"date": "2011-07", "violation_description": "Street Cleaning", "num_tickets": 375}, {"date": "2011-08", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 352}, {"date": "2011-08", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 124}, {"date": "2011-08", "violation_description": "Residential Permit Parking", "num_tickets": 173}, {"date": "2011-08", "violation_description": "Street Cleaning", "num_tickets": 403}, {"date": "2011-09", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 318}, {"date": "2011-09", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 133}, {"date": "2011-09", "violation_description": "Residential Permit Parking", "num_tickets": 165}, {"date": "2011-09", "violation_description": "Street Cleaning", "num_tickets": 351}, {"date": "2011-10", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 330}, {"date": "2011-10", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 129}, {"date": "2011-10", "violation_description": "Residential Permit Parking", "num_tickets": 175}, {"date": "2011-10", "violation_description": "Street Cleaning", "num_tickets": 349}, {"date": "2011-11", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 374}, {"date": "2011-11", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 105}, {"date": "2011-11", "violation_description": "Residential Permit Parking", "num_tickets": 159}, {"date": "2011-11", "violation_description": "Street Cleaning", "num_tickets": 146}, {"date": "2011-12", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 365}, {"date": "2011-12", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 132}, {"date": "2011-12", "violation_description": "Residential Permit Parking", "num_tickets": 156}, {"date": "2012-01", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 396}, {"date": "2012-01", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 110}, {"date": "2012-01", "violation_description": "Residential Permit Parking", "num_tickets": 118}, {"date": "2012-02", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 39}, {"date": "2012-02", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 304}, {"date": "2012-02", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 136}, {"date": "2012-02", "violation_description": "Residential Permit Parking", "num_tickets": 142}, {"date": "2012-02", "violation_description": "Street Cleaning", "num_tickets": 2}, {"date": "2012-03", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 327}, {"date": "2012-03", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 298}, {"date": "2012-03", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 155}, {"date": "2012-03", "violation_description": "Residential Permit Parking", "num_tickets": 189}, {"date": "2012-03", "violation_description": "Street Cleaning", "num_tickets": 1}, {"date": "2012-04", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 283}, {"date": "2012-04", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 273}, {"date": "2012-04", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 122}, {"date": "2012-04", "violation_description": "Residential Permit Parking", "num_tickets": 207}, {"date": "2012-04", "violation_description": "Street Cleaning", "num_tickets": 396}, {"date": "2012-05", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 257}, {"date": "2012-05", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 292}, {"date": "2012-05", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 122}, {"date": "2012-05", "violation_description": "Residential Permit Parking", "num_tickets": 182}, {"date": "2012-05", "violation_description": "Street Cleaning", "num_tickets": 387}, {"date": "2012-06", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 302}, {"date": "2012-06", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 319}, {"date": "2012-06", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 150}, {"date": "2012-06", "violation_description": "Residential Permit Parking", "num_tickets": 185}, {"date": "2012-06", "violation_description": "Street Cleaning", "num_tickets": 383}, {"date": "2012-07", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 272}, {"date": "2012-07", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 320}, {"date": "2012-07", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 126}, {"date": "2012-07", "violation_description": "Residential Permit Parking", "num_tickets": 143}, {"date": "2012-07", "violation_description": "Street Cleaning", "num_tickets": 377}, {"date": "2012-08", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 321}, {"date": "2012-08", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 312}, {"date": "2012-08", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 116}, {"date": "2012-08", "violation_description": "Residential Permit Parking", "num_tickets": 155}, {"date": "2012-08", "violation_description": "Street Cleaning", "num_tickets": 411}, {"date": "2012-09", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 292}, {"date": "2012-09", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 301}, {"date": "2012-09", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 137}, {"date": "2012-09", "violation_description": "Residential Permit Parking", "num_tickets": 165}, {"date": "2012-09", "violation_description": "Street Cleaning", "num_tickets": 330}, {"date": "2012-10", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 306}, {"date": "2012-10", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 324}, {"date": "2012-10", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 128}, {"date": "2012-10", "violation_description": "Residential Permit Parking", "num_tickets": 190}, {"date": "2012-10", "violation_description": "Street Cleaning", "num_tickets": 379}, {"date": "2012-11", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 328}, {"date": "2012-11", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 331}, {"date": "2012-11", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 118}, {"date": "2012-11", "violation_description": "Residential Permit Parking", "num_tickets": 166}, {"date": "2012-11", "violation_description": "Street Cleaning", "num_tickets": 173}, {"date": "2012-12", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 286}, {"date": "2012-12", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 327}, {"date": "2012-12", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 107}, {"date": "2012-12", "violation_description": "Residential Permit Parking", "num_tickets": 145}, {"date": "2013-01", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 291}, {"date": "2013-01", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 464}, {"date": "2013-01", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 125}, {"date": "2013-01", "violation_description": "Residential Permit Parking", "num_tickets": 131}, {"date": "2013-02", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 247}, {"date": "2013-02", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 247}, {"date": "2013-02", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 146}, {"date": "2013-02", "violation_description": "Residential Permit Parking", "num_tickets": 123}, {"date": "2013-02", "violation_description": "Street Cleaning", "num_tickets": 1}, {"date": "2013-03", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 317}, {"date": "2013-03", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 342}, {"date": "2013-03", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 125}, {"date": "2013-03", "violation_description": "Residential Permit Parking", "num_tickets": 162}, {"date": "2013-04", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 283}, {"date": "2013-04", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 307}, {"date": "2013-04", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 146}, {"date": "2013-04", "violation_description": "Residential Permit Parking", "num_tickets": 185}, {"date": "2013-04", "violation_description": "Street Cleaning", "num_tickets": 461}, {"date": "2013-05", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 264}, {"date": "2013-05", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 317}, {"date": "2013-05", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 124}, {"date": "2013-05", "violation_description": "Residential Permit Parking", "num_tickets": 165}, {"date": "2013-05", "violation_description": "Street Cleaning", "num_tickets": 396}, {"date": "2013-06", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 217}, {"date": "2013-06", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 347}, {"date": "2013-06", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 133}, {"date": "2013-06", "violation_description": "Residential Permit Parking", "num_tickets": 181}, {"date": "2013-06", "violation_description": "Street Cleaning", "num_tickets": 346}, {"date": "2013-07", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 247}, {"date": "2013-07", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 330}, {"date": "2013-07", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 129}, {"date": "2013-07", "violation_description": "Residential Permit Parking", "num_tickets": 149}, {"date": "2013-07", "violation_description": "Street Cleaning", "num_tickets": 405}, {"date": "2013-08", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 256}, {"date": "2013-08", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 327}, {"date": "2013-08", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 128}, {"date": "2013-08", "violation_description": "Residential Permit Parking", "num_tickets": 197}, {"date": "2013-08", "violation_description": "Street Cleaning", "num_tickets": 389}, {"date": "2013-09", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 207}, {"date": "2013-09", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 338}, {"date": "2013-09", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 114}, {"date": "2013-09", "violation_description": "Residential Permit Parking", "num_tickets": 159}, {"date": "2013-09", "violation_description": "Street Cleaning", "num_tickets": 342}, {"date": "2013-10", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 276}, {"date": "2013-10", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 349}, {"date": "2013-10", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 125}, {"date": "2013-10", "violation_description": "Residential Permit Parking", "num_tickets": 172}, {"date": "2013-10", "violation_description": "Street Cleaning", "num_tickets": 394}, {"date": "2013-11", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 277}, {"date": "2013-11", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 303}, {"date": "2013-11", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 110}, {"date": "2013-11", "violation_description": "Residential Permit Parking", "num_tickets": 138}, {"date": "2013-11", "violation_description": "Street Cleaning", "num_tickets": 269}, {"date": "2013-12", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 291}, {"date": "2013-12", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 365}, {"date": "2013-12", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 118}, {"date": "2013-12", "violation_description": "Residential Permit Parking", "num_tickets": 126}, {"date": "2013-12", "violation_description": "Street Cleaning", "num_tickets": 1}, {"date": "2014-01", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 235}, {"date": "2014-01", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 494}, {"date": "2014-01", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 113}, {"date": "2014-01", "violation_description": "Residential Permit Parking", "num_tickets": 70}, {"date": "2014-01", "violation_description": "Street Cleaning", "num_tickets": 2}, {"date": "2014-02", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 234}, {"date": "2014-02", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 324}, {"date": "2014-02", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 152}, {"date": "2014-02", "violation_description": "Residential Permit Parking", "num_tickets": 77}, {"date": "2014-03", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 330}, {"date": "2014-03", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 366}, {"date": "2014-03", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 163}, {"date": "2014-03", "violation_description": "Residential Permit Parking", "num_tickets": 147}, {"date": "2014-04", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 285}, {"date": "2014-04", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 345}, {"date": "2014-04", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 137}, {"date": "2014-04", "violation_description": "Residential Permit Parking", "num_tickets": 158}, {"date": "2014-04", "violation_description": "Street Cleaning", "num_tickets": 456}, {"date": "2014-05", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 245}, {"date": "2014-05", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 350}, {"date": "2014-05", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 167}, {"date": "2014-05", "violation_description": "Residential Permit Parking", "num_tickets": 155}, {"date": "2014-05", "violation_description": "Street Cleaning", "num_tickets": 365}, {"date": "2014-06", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 209}, {"date": "2014-06", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 374}, {"date": "2014-06", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 139}, {"date": "2014-06", "violation_description": "Residential Permit Parking", "num_tickets": 179}, {"date": "2014-06", "violation_description": "Street Cleaning", "num_tickets": 382}, {"date": "2014-07", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 121}, {"date": "2014-07", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 325}, {"date": "2014-07", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 147}, {"date": "2014-07", "violation_description": "Residential Permit Parking", "num_tickets": 149}, {"date": "2014-07", "violation_description": "Street Cleaning", "num_tickets": 420}, {"date": "2014-08", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 116}, {"date": "2014-08", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 334}, {"date": "2014-08", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 141}, {"date": "2014-08", "violation_description": "Residential Permit Parking", "num_tickets": 187}, {"date": "2014-08", "violation_description": "Street Cleaning", "num_tickets": 369}, {"date": "2014-09", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 156}, {"date": "2014-09", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 331}, {"date": "2014-09", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 125}, {"date": "2014-09", "violation_description": "Residential Permit Parking", "num_tickets": 169}, {"date": "2014-09", "violation_description": "Street Cleaning", "num_tickets": 355}, {"date": "2014-10", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 176}, {"date": "2014-10", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 403}, {"date": "2014-10", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 122}, {"date": "2014-10", "violation_description": "Residential Permit Parking", "num_tickets": 159}, {"date": "2014-10", "violation_description": "Street Cleaning", "num_tickets": 366}, {"date": "2014-11", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 174}, {"date": "2014-11", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 352}, {"date": "2014-11", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 91}, {"date": "2014-11", "violation_description": "Residential Permit Parking", "num_tickets": 161}, {"date": "2014-11", "violation_description": "Street Cleaning", "num_tickets": 189}, {"date": "2014-12", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 153}, {"date": "2014-12", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 365}, {"date": "2014-12", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 128}, {"date": "2014-12", "violation_description": "Residential Permit Parking", "num_tickets": 166}, {"date": "2015-01", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 195}, {"date": "2015-01", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 417}, {"date": "2015-01", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 135}, {"date": "2015-01", "violation_description": "Residential Permit Parking", "num_tickets": 125}, {"date": "2015-02", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 151}, {"date": "2015-02", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 218}, {"date": "2015-02", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 123}, {"date": "2015-02", "violation_description": "Residential Permit Parking", "num_tickets": 84}, {"date": "2015-02", "violation_description": "Street Cleaning", "num_tickets": 1}, {"date": "2015-03", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 221}, {"date": "2015-03", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 326}, {"date": "2015-03", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 152}, {"date": "2015-03", "violation_description": "Residential Permit Parking", "num_tickets": 184}, {"date": "2015-03", "violation_description": "Street Cleaning", "num_tickets": 2}, {"date": "2015-04", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 222}, {"date": "2015-04", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 316}, {"date": "2015-04", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 123}, {"date": "2015-04", "violation_description": "Residential Permit Parking", "num_tickets": 170}, {"date": "2015-04", "violation_description": "Street Cleaning", "num_tickets": 444}, {"date": "2015-05", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 243}, {"date": "2015-05", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 351}, {"date": "2015-05", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 146}, {"date": "2015-05", "violation_description": "Residential Permit Parking", "num_tickets": 170}, {"date": "2015-05", "violation_description": "Street Cleaning", "num_tickets": 338}, {"date": "2015-06", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 227}, {"date": "2015-06", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 368}, {"date": "2015-06", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 127}, {"date": "2015-06", "violation_description": "Residential Permit Parking", "num_tickets": 162}, {"date": "2015-06", "violation_description": "Street Cleaning", "num_tickets": 417}, {"date": "2015-07", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 223}, {"date": "2015-07", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 365}, {"date": "2015-07", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 146}, {"date": "2015-07", "violation_description": "Residential Permit Parking", "num_tickets": 187}, {"date": "2015-07", "violation_description": "Street Cleaning", "num_tickets": 423}, {"date": "2015-08", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 207}, {"date": "2015-08", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 338}, {"date": "2015-08", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 134}, {"date": "2015-08", "violation_description": "Residential Permit Parking", "num_tickets": 192}, {"date": "2015-08", "violation_description": "Street Cleaning", "num_tickets": 397}, {"date": "2015-09", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 210}, {"date": "2015-09", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 367}, {"date": "2015-09", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 136}, {"date": "2015-09", "violation_description": "Residential Permit Parking", "num_tickets": 170}, {"date": "2015-09", "violation_description": "Street Cleaning", "num_tickets": 369}, {"date": "2015-10", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 261}, {"date": "2015-10", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 394}, {"date": "2015-10", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 129}, {"date": "2015-10", "violation_description": "Residential Permit Parking", "num_tickets": 181}, {"date": "2015-10", "violation_description": "Street Cleaning", "num_tickets": 354}, {"date": "2015-11", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 264}, {"date": "2015-11", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 323}, {"date": "2015-11", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 135}, {"date": "2015-11", "violation_description": "Residential Permit Parking", "num_tickets": 147}, {"date": "2015-11", "violation_description": "Street Cleaning", "num_tickets": 192}, {"date": "2015-12", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 237}, {"date": "2015-12", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 440}, {"date": "2015-12", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 156}, {"date": "2015-12", "violation_description": "Residential Permit Parking", "num_tickets": 138}, {"date": "2015-12", "violation_description": "Street Cleaning", "num_tickets": 2}, {"date": "2016-01", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 220}, {"date": "2016-01", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 518}, {"date": "2016-01", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 123}, {"date": "2016-01", "violation_description": "Residential Permit Parking", "num_tickets": 141}, {"date": "2016-02", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 223}, {"date": "2016-02", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 318}, {"date": "2016-02", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 121}, {"date": "2016-02", "violation_description": "Residential Permit Parking", "num_tickets": 134}, {"date": "2016-02", "violation_description": "Street Cleaning", "num_tickets": 2}, {"date": "2016-03", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 220}, {"date": "2016-03", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 330}, {"date": "2016-03", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 165}, {"date": "2016-03", "violation_description": "Residential Permit Parking", "num_tickets": 170}, {"date": "2016-04", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 197}, {"date": "2016-04", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 345}, {"date": "2016-04", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 162}, {"date": "2016-04", "violation_description": "Residential Permit Parking", "num_tickets": 153}, {"date": "2016-04", "violation_description": "Street Cleaning", "num_tickets": 423}, {"date": "2016-05", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 174}, {"date": "2016-05", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 401}, {"date": "2016-05", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 159}, {"date": "2016-05", "violation_description": "Residential Permit Parking", "num_tickets": 166}, {"date": "2016-05", "violation_description": "Street Cleaning", "num_tickets": 345}, {"date": "2016-06", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 191}, {"date": "2016-06", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 365}, {"date": "2016-06", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 148}, {"date": "2016-06", "violation_description": "Residential Permit Parking", "num_tickets": 131}, {"date": "2016-06", "violation_description": "Street Cleaning", "num_tickets": 380}, {"date": "2016-07", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 172}, {"date": "2016-07", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 335}, {"date": "2016-07", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 143}, {"date": "2016-07", "violation_description": "Residential Permit Parking", "num_tickets": 149}, {"date": "2016-07", "violation_description": "Street Cleaning", "num_tickets": 334}, {"date": "2016-08", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 180}, {"date": "2016-08", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 428}, {"date": "2016-08", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 153}, {"date": "2016-08", "violation_description": "Residential Permit Parking", "num_tickets": 179}, {"date": "2016-08", "violation_description": "Street Cleaning", "num_tickets": 367}, {"date": "2016-09", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 188}, {"date": "2016-09", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 368}, {"date": "2016-09", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 108}, {"date": "2016-09", "violation_description": "Residential Permit Parking", "num_tickets": 163}, {"date": "2016-09", "violation_description": "Street Cleaning", "num_tickets": 320}, {"date": "2016-10", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 194}, {"date": "2016-10", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 370}, {"date": "2016-10", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 115}, {"date": "2016-10", "violation_description": "Residential Permit Parking", "num_tickets": 201}, {"date": "2016-10", "violation_description": "Street Cleaning", "num_tickets": 305}, {"date": "2016-11", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 265}, {"date": "2016-11", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 350}, {"date": "2016-11", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 133}, {"date": "2016-11", "violation_description": "Residential Permit Parking", "num_tickets": 167}, {"date": "2016-11", "violation_description": "Street Cleaning", "num_tickets": 197}, {"date": "2016-12", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 212}, {"date": "2016-12", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 331}, {"date": "2016-12", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 125}, {"date": "2016-12", "violation_description": "Residential Permit Parking", "num_tickets": 134}, {"date": "2017-01", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 218}, {"date": "2017-01", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 491}, {"date": "2017-01", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 122}, {"date": "2017-01", "violation_description": "Residential Permit Parking", "num_tickets": 161}, {"date": "2017-02", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 197}, {"date": "2017-02", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 286}, {"date": "2017-02", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 110}, {"date": "2017-02", "violation_description": "Residential Permit Parking", "num_tickets": 164}, {"date": "2017-03", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 220}, {"date": "2017-03", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 293}, {"date": "2017-03", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 143}, {"date": "2017-03", "violation_description": "Residential Permit Parking", "num_tickets": 177}, {"date": "2017-03", "violation_description": "Street Cleaning", "num_tickets": 1}, {"date": "2017-04", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 208}, {"date": "2017-04", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 281}, {"date": "2017-04", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 126}, {"date": "2017-04", "violation_description": "Residential Permit Parking", "num_tickets": 176}, {"date": "2017-04", "violation_description": "Street Cleaning", "num_tickets": 326}, {"date": "2017-05", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 197}, {"date": "2017-05", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 273}, {"date": "2017-05", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 133}, {"date": "2017-05", "violation_description": "Residential Permit Parking", "num_tickets": 205}, {"date": "2017-05", "violation_description": "Street Cleaning", "num_tickets": 322}, {"date": "2017-06", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 206}, {"date": "2017-06", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 275}, {"date": "2017-06", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 134}, {"date": "2017-06", "violation_description": "Residential Permit Parking", "num_tickets": 177}, {"date": "2017-06", "violation_description": "Street Cleaning", "num_tickets": 375}, {"date": "2017-07", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 203}, {"date": "2017-07", "violation_description": "Expired Plates Or Temporary Registration", "num_tickets": 128}, {"date": "2017-07", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 129}, {"date": "2017-07", "violation_description": "Residential Permit Parking", "num_tickets": 212}, {"date": "2017-07", "violation_description": "Street Cleaning", "num_tickets": 349}, {"date": "2017-08", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 226}, {"date": "2017-08", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 152}, {"date": "2017-08", "violation_description": "Residential Permit Parking", "num_tickets": 199}, {"date": "2017-08", "violation_description": "Street Cleaning", "num_tickets": 387}, {"date": "2017-09", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 188}, {"date": "2017-09", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 163}, {"date": "2017-09", "violation_description": "Residential Permit Parking", "num_tickets": 190}, {"date": "2017-09", "violation_description": "Street Cleaning", "num_tickets": 292}, {"date": "2017-10", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 180}, {"date": "2017-10", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 115}, {"date": "2017-10", "violation_description": "Residential Permit Parking", "num_tickets": 157}, {"date": "2017-10", "violation_description": "Street Cleaning", "num_tickets": 323}, {"date": "2017-11", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 195}, {"date": "2017-11", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 104}, {"date": "2017-11", "violation_description": "Residential Permit Parking", "num_tickets": 145}, {"date": "2017-11", "violation_description": "Street Cleaning", "num_tickets": 162}, {"date": "2017-12", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 155}, {"date": "2017-12", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 115}, {"date": "2017-12", "violation_description": "Residential Permit Parking", "num_tickets": 136}, {"date": "2017-12", "violation_description": "Street Cleaning", "num_tickets": 2}, {"date": "2018-01", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 202}, {"date": "2018-01", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 117}, {"date": "2018-01", "violation_description": "Residential Permit Parking", "num_tickets": 147}, {"date": "2018-02", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 194}, {"date": "2018-02", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 100}, {"date": "2018-02", "violation_description": "Residential Permit Parking", "num_tickets": 116}, {"date": "2018-03", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 262}, {"date": "2018-03", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 155}, {"date": "2018-03", "violation_description": "Residential Permit Parking", "num_tickets": 186}, {"date": "2018-04", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 238}, {"date": "2018-04", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 146}, {"date": "2018-04", "violation_description": "Residential Permit Parking", "num_tickets": 162}, {"date": "2018-04", "violation_description": "Street Cleaning", "num_tickets": 296}, {"date": "2018-05", "violation_description": "Exp. Meter Non-Central Business District", "num_tickets": 91}, {"date": "2018-05", "violation_description": "Parking/Standing Prohibited Anytime", "num_tickets": 44}, {"date": "2018-05", "violation_description": "Residential Permit Parking", "num_tickets": 71}, {"date": "2018-05", "violation_description": "Street Cleaning", "num_tickets": 148}]}}, {"mode": "vega-lite"});
</script>
</div>
</div>
<ol start="5" type="1">
<li>Compare and contrast the plots you made for the prior three questions. What are the pros and cons of each plot?</li>
</ol>
<p><strong>Solution:</strong> The line plot is easy to read and interpret and sucessefully shows the overall trend over time. However, it doesn’t give details for what is driving the trend and what the composition of tickets is like. The heat map does a good job at showing the seasonality of tickets and prompts us to ask interesting quiestions like, “why are there more tickets at the start of each month” and “why does April seem to be a high ticket month?”. The downside it that it is very busy and takes some time to interpret. It also flattens the data to the calandar year level which might mask interesting trends across years. The Lasagna plot shows us some interesting facts about the most common ticket types which motivate potentially interesting questions. However, it is the hardest of the three to quickly interpret and only shows the top 5 ticket types which may not be the most policy relevant.</p>
<ol start="6" type="1">
<li>Suppose that the lesson you want a reader to take away is that the enforcement of violations is not evenly distributed over time? Which plot is best and why?</li>
</ol>
<p><strong>Solution:</strong> The heat plot does the best job of showing that tickets are not given evenly across the year. This tells us that either the violation rate or the enforcement rate (or both!) varies over time. This plot can be used to motivate further questions or be used in conjuction with other analysis to make the case that enforecement changes over the year and why that might be.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>